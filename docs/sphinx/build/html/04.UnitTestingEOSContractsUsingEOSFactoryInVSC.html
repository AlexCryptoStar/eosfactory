<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Unit-testing EOS Contracts using EOSFactory in Visual Studio Code &mdash; EOSFactory 0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="EOSFactory 0.0 documentation" href="index.html" />
    <link rel="next" title="pyteos" href="pyteos.html" />
    <link rel="prev" title="Compiling EOS Contracts using EOSFactory in Visual Studio Code" href="03.CompilingEOSContractsUsingEOSFactoryInVSC.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          EOSFactory</a>
        <span class="navbar-text navbar-version pull-left"><b>v. 0.8.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="00.IntroductionToEOSFactory.html">Introduction to EOSFactory</a></li>
<li class="toctree-l1"><a class="reference internal" href="01.InstallingEOSFactory.html">Installing EOSFactory</a></li>
<li class="toctree-l1"><a class="reference internal" href="02.InteractingWithEOSContractsInEOSFactory.html">Interacting with EOS Contracts in EOSFactory</a></li>
<li class="toctree-l1"><a class="reference internal" href="03.CompilingEOSContractsUsingEOSFactoryInVSC.html">Compiling EOS Contracts using EOSFactory in <em>Visual Studio Code</em></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Unit-testing EOS Contracts using EOSFactory in <em>Visual Studio Code</em></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyteos.html">pyteos</a></li>
<li class="toctree-l1"><a class="reference internal" href="eosf.html">eosf</a></li>
<li class="toctree-l1"><a class="reference internal" href="node.html">node</a></li>
<li class="toctree-l1"><a class="reference internal" href="sess.html">sess</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Unit-testing EOS Contracts using EOSFactory in <em>Visual Studio Code</em></a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#create-a-unit-test">Create a unit-test</a></li>
<li><a class="reference internal" href="#the-tic-tac-toe-game">The <em>Tic-Tac-Toe</em> game</a></li>
<li><a class="reference internal" href="#further-steps">Further steps</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="03.CompilingEOSContractsUsingEOSFactoryInVSC.html" title="Previous Chapter: Compiling EOS Contracts using EOSFactory in Visual Studio Code"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Compiling EOS...</span>
    </a>
  </li>
  <li>
    <a href="pyteos.html" title="Next Chapter: pyteos"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">pyteos &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/04.UnitTestingEOSContractsUsingEOSFactoryInVSC.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="unit-testing-eos-contracts-using-eosfactory-in-visual-studio-code">
<span id="unit-testing-eos-contracts-using-eosfactory-in-visual-studio-code"></span><h1>Unit-testing EOS Contracts using EOSFactory in <em>Visual Studio Code</em><a class="headerlink" href="#unit-testing-eos-contracts-using-eosfactory-in-visual-studio-code" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this tutorial is to demonstrate how EOSFactory and its Python CLI can be used to make unit-testing EOS contracts easy &amp; intuitive.</p>
<div class="section" id="prerequisites">
<span id="prerequisites"></span><h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>This tutorial assumes that you have successfully installed EOSFactory. If it&#8217;s not the case, please refer to <a class="reference external" href="01.InstallingEOSFactory.html">Installing EOSFactory</a>.</li>
<li>We also assume that you are familiar with the material covered in <a class="reference external" href="02.InteractingWithEOSContractsInEOSFactory.html">Interacting with EOS Contracts in EOSFactory</a>.</li>
</ul>
</div>
<div class="section" id="create-a-unit-test">
<span id="create-a-unit-test"></span><h2>Create a unit-test<a class="headerlink" href="#create-a-unit-test" title="Permalink to this headline">¶</a></h2>
<p>In <em>Visual Studio Code</em> create a new Python file containing your unit-test.</p>
<p>Here is the recommended structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">node</span>
<span class="kn">import</span> <span class="nn">sess</span>
<span class="kn">from</span> <span class="nn">eosf</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
    <span class="n">node</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    
    <span class="c1">############################</span>
    <span class="c1"># Your unit-test goes here #</span>
    <span class="c1">############################</span>
    
    <span class="n">node</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Test OK&quot;</span><span class="p">)</span>
    
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>And below is an example of a unit-test for the <code class="docutils literal"><span class="pre">eosio.token</span></code> contract:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">node</span>
<span class="kn">import</span> <span class="nn">sess</span>
<span class="kn">from</span> <span class="nn">eosf</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
    <span class="n">node</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

    <span class="n">c</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="s2">&quot;eosio.token&quot;</span><span class="p">)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">deploy</span><span class="p">()</span>

    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;create&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;issuer&quot;:&quot;eosio&quot;, &quot;maximum_supply&quot;:&quot;1000000000.0000 EOS&quot;, &quot;can_freeze&quot;:0, &quot;can_recall&quot;:0, &quot;can_whitelist&quot;:0}&#39;</span><span class="p">)</span>
    
    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;issue&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;to&quot;:&quot;alice&quot;, &quot;quantity&quot;:&quot;100.0000 EOS&quot;, &quot;memo&quot;:&quot;memo&quot;}&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">eosio</span><span class="p">)</span>

    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;transfer&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;from&quot;:&quot;alice&quot;, &quot;to&quot;:&quot;carol&quot;, &quot;quantity&quot;:&quot;25.0000 EOS&quot;, &quot;memo&quot;:&quot;memo&quot;}&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">alice</span><span class="p">)</span>
    
    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;transfer&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;from&quot;:&quot;carol&quot;, &quot;to&quot;:&quot;bob&quot;, &quot;quantity&quot;:&quot;13.0000 EOS&quot;, &quot;memo&quot;:&quot;memo&quot;}&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">carol</span><span class="p">)</span>
    
    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;transfer&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;from&quot;:&quot;bob&quot;, &quot;to&quot;:&quot;alice&quot;, &quot;quantity&quot;:&quot;2.0000 EOS&quot;, &quot;memo&quot;:&quot;memo&quot;}&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>

    <span class="n">t1</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;accounts&quot;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">alice</span><span class="p">)</span>
    <span class="n">t2</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;accounts&quot;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>
    <span class="n">t3</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;accounts&quot;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">carol</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">t1</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;balance&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;77.0000 EOS&#39;</span>
    <span class="k">assert</span> <span class="n">t2</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;balance&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;11.0000 EOS&#39;</span>
    <span class="k">assert</span> <span class="n">t3</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;balance&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;12.0000 EOS&#39;</span>

    <span class="n">node</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Test OK&quot;</span><span class="p">)</span>
    
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Assuming your unit-test file is named <code class="docutils literal"><span class="pre">test.py</span></code>, you can run it in a Python terminal:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">test</span>
<span class="n">test</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Or you can do it directly in a bash terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>python3 ./tests/test.py
</pre></div>
</div>
<p>In our case the output looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>test node.reset():
#       head block: 3
#  head block time: 2018-05-13T08:12:23
#  last irreversible block: 3

test node.info():
#       head block: 3
#  head block time: 2018-05-13T08:12:23
#  last irreversible block: 3

test sess.init():
test Contract(&quot;eosio.token&quot;):
#         key name: key_owner
#      private key: 5KLxYTMQRysqpSgVZmhDUQEZEJPKurqHuE9pFF63TuyZJrdvHhe
#       public key: EOS7hxPa3mSdW8ZFfDD89iww5zm8UT8zDMmjNaJAnr8SfLyZdTzcf

#         key name: key_active
#      private key: 5JgqV1B9LTGh5RQXWkDWEyjjkT2SpSToZtcSfdixGZUnaoXJa2c
#       public key: EOS6Tb34ersKsxHje55ntjpupob9a86FTuEGyyT6R7T91pqQM6QCW

#   transaction id: 105c6ddd8baebc8d1eb3266617d3cd6d33db4e18a1a3a0a1bf3ed65bc8ebb2e6

test c.get_code():
#        code hash: 0000000000000000000000000000000000000000000000000000000000000000

test c.deploy():
#   transaction id: 8d3f697f6004092e2d1ba751fa853ceb15ab6eb03af42167eeae47e578aed431

test c.get_code():
#        code hash: 6e86f77a18905bccfbc585886cebf9205b585e9f04fdc79c644050d7c3ff8ccb

test c.push_action(&quot;create&quot;):
#   transaction id: b0d334165e9ea00bbb700c92f0ecce38f37eabb90523653efcd07bac02bf8258

test c.push_action(&quot;issue&quot;):
#   transaction id: 23346270e5a0d75d706df0f54c658c5be9b6531f089d1fc5df1e8d7796ce2abf

test c.push_action(&quot;transfer&quot;, sess.alice):
#   transaction id: b83ea01a6e7a1eafcf95422bd31e4b077463e8f7fa4d67e25df16f7e87e46674

test c.push_action(&quot;transfer&quot;, sess.carol):
#   transaction id: 94291123ac67752317bfd9dfed55530610465b4d67601967809772209abcf3be

test c.push_action(&quot;transfer&quot; sess.bob):
#   transaction id: 852cc67e445020024af698cd89f30888479a9ad43c507bd962e444bb96e9aca3

testc.get_table(&quot;accounts&quot;, sess.alice):
#  {
#      &quot;rows&quot;: [
#          {
#              &quot;balance&quot;: &quot;77.0000 EOS&quot;,
#              &quot;frozen&quot;: &quot;0&quot;,
#              &quot;whitelist&quot;: &quot;1&quot;
#          }
#      ],
#      &quot;more&quot;: &quot;false&quot;
#  }
#

test c.get_table(&quot;accounts&quot;, sess.bob):
#  {
#      &quot;rows&quot;: [
#          {
#              &quot;balance&quot;: &quot;11.0000 EOS&quot;,
#              &quot;frozen&quot;: &quot;0&quot;,
#              &quot;whitelist&quot;: &quot;1&quot;
#          }
#      ],
#      &quot;more&quot;: &quot;false&quot;
#  }
#

test t3=c.get_table(&quot;accounts&quot;, sess.carol):
#  {
#      &quot;rows&quot;: [
#          {
#              &quot;balance&quot;: &quot;12.0000 EOS&quot;,
#              &quot;frozen&quot;: &quot;0&quot;,
#              &quot;whitelist&quot;: &quot;1&quot;
#          }
#      ],
#      &quot;more&quot;: &quot;false&quot;
#  }
#

assert t1.json[&quot;rows&quot;][0][&quot;balance&quot;] == &quot;77.0000 EOS&quot;:
assert t2.json[&quot;rows&quot;][0][&quot;balance&quot;] == &quot;11.0000 EOS&quot;:
assert t3.json[&quot;rows&quot;][0][&quot;balance&quot;] == &quot;12.0000 EOS&quot;:
test node.stop():
#  Daemon is stopped.

Test OK
</pre></div>
</div>
</div>
<div class="section" id="the-tic-tac-toe-game">
<span id="the-tic-tac-toe-game"></span><h2>The <em>Tic-Tac-Toe</em> game<a class="headerlink" href="#the-tic-tac-toe-game" title="Permalink to this headline">¶</a></h2>
<p>Here is a unit-test for the <em>Tic-Tac-Toe</em> game contract:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">node</span>
<span class="kn">import</span> <span class="nn">sess</span>
<span class="kn">from</span> <span class="nn">eosf</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
    <span class="n">node</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

    <span class="n">c</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="s2">&quot;tic.tac.toe&quot;</span><span class="p">)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">deploy</span><span class="p">()</span>

    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;create&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;challenger&quot;:&quot;alice&quot;, &quot;host&quot;:&quot;bob&quot;}&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>

    <span class="n">t</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;games&quot;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>
    
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>

    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;move&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;challenger&quot;:&quot;alice&quot;, &quot;host&quot;:&quot;bob&quot;, &quot;by&quot;:&quot;bob&quot;, &quot;mvt&quot;:{&quot;row&quot;:0, &quot;column&quot;:0} }&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>
    
    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;move&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;challenger&quot;:&quot;alice&quot;, &quot;host&quot;:&quot;bob&quot;, &quot;by&quot;:&quot;alice&quot;, &quot;mvt&quot;:{&quot;row&quot;:1, &quot;column&quot;:1} }&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">alice</span><span class="p">)</span>

    <span class="n">t</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;games&quot;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>

    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;restart&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;challenger&quot;:&quot;alice&quot;, &quot;host&quot;:&quot;bob&quot;, &quot;by&quot;:&quot;bob&quot;}&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>
    
    <span class="n">t</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;games&quot;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>
    
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;board&quot;</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>

    <span class="n">c</span><span class="o">.</span><span class="n">push_action</span><span class="p">(</span><span class="s2">&quot;close&quot;</span><span class="p">,</span> <span class="s1">&#39;{&quot;challenger&quot;:&quot;alice&quot;, &quot;host&quot;:&quot;bob&quot;}&#39;</span><span class="p">,</span> <span class="n">sess</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>

    <span class="n">node</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Test OK&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>And here is the result:</p>
<div class="highlight-python"><div class="highlight"><pre>test node.reset():
#       head block: 3
#  head block time: 2018-05-13T08:13:46
#  last irreversible block: 3

test node.info():
#       head block: 3
#  head block time: 2018-05-13T08:13:46
#  last irreversible block: 3

test sess.init():
test c = Contract(&quot;tic.tac.toe&quot;):
#         key name: key_owner
#      private key: 5KAdpYMTi49RB18VdKqH72FDXd2dUkdU9ih2tr8ZWhFmhFqJirS
#       public key: EOS8U3MaZWTL2MpJNDmcY8dPbCkk2HNQbU9HV8aPYXTGA2ab9vtKe

#         key name: key_active
#      private key: 5Ka8Bb52jTF5FUFWv7eToiVDZD8fRZtzCKm5B5PmF3h8hC26PxF
#       public key: EOS81CvQvZ2GMo9jM2ioT8i2J7HYriteibUAHc2E81pHfU8ZFZdox

#   transaction id: 5317a5cce11f64792b40b9a5b0c594179288c044e0f3f65342665e74948a6473

test c.deploy():
#   transaction id: 3dd1cb6f666c43de74f5954a68c4880ede56e323baed5ee31b08030829b4e754

test c.push_action(&quot;create&quot;, sess.bob):
#   transaction id: 68230a9b217dd58c1db465a791eb5c25fd70631ba599cd114de73aa24eabc01b

test t=c.get_table(&quot;games&quot;, sess.bob):
#  {
#      &quot;rows&quot;: [
#          {
#              &quot;challenger&quot;: &quot;alice&quot;,
#              &quot;host&quot;: &quot;bob&quot;,
#              &quot;turn&quot;: &quot;bob&quot;,
#              &quot;winner&quot;: &quot;none&quot;,
#              &quot;board&quot;: [
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;
#              ]
#          }
#      ],
#      &quot;more&quot;: &quot;false&quot;
#  }
#

test c.push_action(&quot;move&quot;, sess.bob):
#   transaction id: f0647a1839a451b44efb738d92a3fde4eaa55811d3f88cb450ab4d91cb2f2ba5

test c.push_action(&quot;move&quot;, sess.alice):
#   transaction id: 06c3e32d107f54aad31119f69df74518e730589d4d2fcf34e1d6290782c57c25

#  {
#      &quot;rows&quot;: [
#          {
#              &quot;challenger&quot;: &quot;alice&quot;,
#              &quot;host&quot;: &quot;bob&quot;,
#              &quot;turn&quot;: &quot;bob&quot;,
#              &quot;winner&quot;: &quot;none&quot;,
#              &quot;board&quot;: [
#                  &quot;1&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;2&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;
#              ]
#          }
#      ],
#      &quot;more&quot;: &quot;false&quot;
#  }
#

test c.push_action(&quot;restart&quot;, sess.bob):
#   transaction id: 22acba5e221b40e102c57fb2e2bd6ad268d644471c31fe72e8dd2c1c51934cb5

test t=c.get_table(&quot;games&quot;, sess.bob):
#  {
#      &quot;rows&quot;: [
#          {
#              &quot;challenger&quot;: &quot;alice&quot;,
#              &quot;host&quot;: &quot;bob&quot;,
#              &quot;turn&quot;: &quot;bob&quot;,
#              &quot;winner&quot;: &quot;none&quot;,
#              &quot;board&quot;: [
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;,
#                  &quot;0&quot;
#              ]
#          }
#      ],
#      &quot;more&quot;: &quot;false&quot;
#  }
#

test c.push_action(&quot;close&quot;, sess.bob):
#   transaction id: accaf31cc12619884be50f8e986c336fb2329f1b55d616178443ee964f62a432

test node.stop():
#  Daemon is stopped.

Test OK
</pre></div>
</div>
</div>
<div class="section" id="further-steps">
<span id="further-steps"></span><h2>Further steps<a class="headerlink" href="#further-steps" title="Permalink to this headline">¶</a></h2>
<p>The above schema is just a proof-of-concept solution for unit-testing in EOSFactory. At this stage we don&#8217;t handle errors properly and we don&#8217;t offer proper assertions. These are just demo examples.</p>
<p>What&#8217;s definitely missing is clear separation between EOSFactory source code and a user&#8217;s workspace where all his contracts &amp; unit-tests are stored. This will be supplied in the next release. For the time being you can keep your contracts in a separate location and refer to them using a full path, e.g.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">c</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="s2">&quot;/mnt/x/Workspaces/contracts/hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, when you create a new contract from a template, paths are not currently supported, so you need to use the contract&#8217;s folder name e.g.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">c</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then figure out it&#8217;s location:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">c</span><span class="o">.</span><span class="n">path</span><span class="p">()</span>
</pre></div>
</div>
<p>And then you can move your contract to a desired location and do unit-tests there.</p>
<p>Ultimately we want to make unit-testing much better organized. Also, we&#8217;ll be aiming at much tighter integration with <em>Visual Studio Code</em>.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Tokenika.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>