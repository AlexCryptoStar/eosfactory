
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Account object &#8212; EOSFactory 2.0 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Account master object" href="account_master.html" />
    <link rel="prev" title="Arguments" href="arguments.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="account_master.html" title="Account master object"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="arguments.html" title="Arguments"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">EOSFactory 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>“”“</p>
<div class="section" id="account-object">
<span id="account-object"></span><h1>Account object<a class="headerlink" href="#account-object" title="Permalink to this headline">¶</a></h1>
<div class="highlight-md notranslate"><div class="highlight"><pre>This file can be executed as a python script: &#39;python3 account.md&#39;.
</pre></div>
</div>
<div class="section" id="set-up">
<span id="set-up"></span><h2>Set-up<a class="headerlink" href="#set-up" title="Permalink to this headline">¶</a></h2>
<pre>
The set-up statements are explained at <a href="setup.html">cases/setup</a>.
</pre><div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
import setup
import eosf
from eosf_wallet import Wallet
from eosf_account import account_create, account_master_create
from eosf_contract import Contract

eosf.set_throw_error(True)
eosf.reset([eosf.Verbosity.TRACE])
&quot;&quot;&quot;
</pre></div>
</div>
<div class="section" id="exactly-one-wallet-object-has-to-exist-in-the-namespace">
<span id="exactly-one-wallet-object-has-to-exist-in-the-namespace"></span><h3>Exactly one ‘Wallet’ object has to exist in the namespace<a class="headerlink" href="#exactly-one-wallet-object-has-to-exist-in-the-namespace" title="Permalink to this headline">¶</a></h3>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
wallet = Wallet()   
account_master_create(&quot;account_master&quot;)
eosf.set_throw_error(False)
&quot;&quot;&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="case">
<span id="case"></span><h2>Case<a class="headerlink" href="#case" title="Permalink to this headline">¶</a></h2>
<div class="highlight-md notranslate"><div class="highlight"><pre>The EOSFactory wraps EOSIO accounts with objects. Accounts can hold smart
contracts. 

Create an account objects: &#39;account_hello&#39;. Add a contract of the class
&#39;hello&#39; to it. The code for the &#39;hello&#39; class is in the EOSIO repository.

Add two other account objects, and execute the action of the contract on them 
subsequently.
</pre></div>
</div>
<div class="section" id="the-account-create-factory-function">
<span id="the-account-create-factory-function"></span><h3>The ‘account_create’ factory function<a class="headerlink" href="#the-account-create-factory-function" title="Permalink to this headline">¶</a></h3>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
account_create(&quot;account_hello&quot;, account_master)
&quot;&quot;&quot;
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>The first argument is the name of the account object to be created, the second
one points to the account master, authorizing the creation.

Only this two arguments are necessary, however there is several default 
arguments that sometimes have to be adjusted.
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>The &#39;account_create&#39; does many tasks:

* Checks whether a &#39;Wallet&#39; object exist in the namespace.
* Checks whether its first argument is not the same as the name of any other
    account objects in the Factory&#39;s statistics. If it is so, a correction
    action is proposed - see the &#39;account_name_conflict.md&#39; case.
* Creates a global object named as the first argument, representing 
    a physical account of a random name (however, the name cen be fixed).
* Opens the wallet, unlock it, put the physical account into it.
* Updates the statistics of the accounts.

All the actions are logged to the terminal, if the verbosity is set default. 
</pre></div>
</div>
</div>
<div class="section" id="methods-of-an-account-objects">
<span id="methods-of-an-account-objects"></span><h3>Methods of an account objects<a class="headerlink" href="#methods-of-an-account-objects" title="Permalink to this headline">¶</a></h3>
<div class="highlight-md notranslate"><div class="highlight"><pre>Any account object can:

* Load a smart contract.
* Push an action on its contract.
* Show its entry (a table) in the blockchain database,

</pre></div>
</div>
</div>
<div class="section" id="create-a-contract-object">
<span id="create-a-contract-object"></span><h3>Create a Contract object<a class="headerlink" href="#create-a-contract-object" title="Permalink to this headline">¶</a></h3>
<pre>
Create a smart contract object instance, appending it to the account 
'account_hello'. The 'Contract' class is presented at <a href="contract.html">cases/contract</a>.
</pre>
```md
"""
contract_hello = Contract(account_hello, "hello")
contract_hello.build()
contract_hello.deploy()
"""
```
```md
The second argument of the creator of the 'Contract' class identifies the 
code source. The Factory tries to be smart therefore searches the repository. 
If it fails, put the right path there, 
'/mnt/c/Workspaces/EOS/eosfactory/contracts/hello/',
for example.<p>If the deployment succeeds, the contract can be executed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>
### Try the contract

```md
Create two contracts &#39;account_alice&#39; and &#39;account_carol&#39;...
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
account_create(&quot;account_alice&quot;, account_master)
account_create(&quot;account_carol&quot;, account_master)
&quot;&quot;&quot;
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>... and execute the action of the contract &#39;hello&#39;:
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
account_hello.push_action(
    &quot;hi&quot;, &#39;{&quot;user&quot;:&quot;&#39; + str(account_alice) + &#39;&quot;}&#39;, account_alice)

account_hello.push_action(
    &quot;hi&quot;, &#39;{&quot;user&quot;:&quot;&#39; + str(account_carol) + &#39;&quot;}&#39;, account_carol)
&quot;&quot;&quot;
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>Besides the usual &#39;Hello&#39; message, you can see the result of a logging 
facility, starting with &#39;INFO&#39;.
</pre></div>
</div>
</div>
<div class="section" id="test-run">
<span id="test-run"></span><h3>Test run<a class="headerlink" href="#test-run" title="Permalink to this headline">¶</a></h3>
<div class="highlight-md notranslate"><div class="highlight"><pre>In an linux bash, change directory to where this file exists, it is the 
directory &#39;docs/source/cases&#39; in the repository, and enter the following 
command:
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>$ python3 account.md
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>We hope that you get something similar to this one shown in the image below.
</pre></div>
</div>
<p><img src="account.png" 
onerror="this.src='../../../source/cases/account.png'"   
alt="account object" width="680px"/></p>
<p>“”“</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Account object</a><ul>
<li><a class="reference internal" href="#set-up">Set-up</a><ul>
<li><a class="reference internal" href="#exactly-one-wallet-object-has-to-exist-in-the-namespace">Exactly one ‘Wallet’ object has to exist in the namespace</a></li>
</ul>
</li>
<li><a class="reference internal" href="#case">Case</a><ul>
<li><a class="reference internal" href="#the-account-create-factory-function">The ‘account_create’ factory function</a></li>
<li><a class="reference internal" href="#methods-of-an-account-objects">Methods of an account objects</a></li>
<li><a class="reference internal" href="#create-a-contract-object">Create a Contract object</a></li>
<li><a class="reference internal" href="#test-run">Test run</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="arguments.html"
                        title="previous chapter">Arguments</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="account_master.html"
                        title="next chapter">Account master object</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/cases/account.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="account_master.html" title="Account master object"
             >next</a> |</li>
        <li class="right" >
          <a href="arguments.html" title="Arguments"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">EOSFactory 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Tokenika.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>