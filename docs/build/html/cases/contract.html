
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Contract object &#8212; EOSFactory 2.0 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Wallet object" href="wallet.html" />
    <link rel="prev" title="Account master object" href="account_master.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="wallet.html" title="Wallet object"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="account_master.html" title="Account master object"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">EOSFactory 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>“”“</p>
<div class="section" id="contract-object">
<span id="contract-object"></span><h1>Contract object<a class="headerlink" href="#contract-object" title="Permalink to this headline">¶</a></h1>
<p>This file can be executed as a python script: ‘python3 contract.md’.</p>
<div class="section" id="set-up">
<span id="set-up"></span><h2>Set-up<a class="headerlink" href="#set-up" title="Permalink to this headline">¶</a></h2>
<p>The set-up statements are explained at <a href="setup.html">cases/setup</a>.</p>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
import unittest
import setup
import eosf
import time

from eosf import Verbosity
from eosf_wallet import Wallet
from eosf_account import account_create, account_master_create
from eosf_contract import Contract

eosf.Logger.verbosity = [Verbosity.TRACE, Verbosity.OUT]
eosf.set_throw_error(True)

eosf.use_keosd(False)
eosf.reset([eosf.Verbosity.TRACE])
&quot;&quot;&quot;
</pre></div>
</div>
<div class="section" id="exactly-one-wallet-object-has-to-exist-in-the-namespace">
<span id="exactly-one-wallet-object-has-to-exist-in-the-namespace"></span><h3>Exactly one ‘Wallet’ object has to exist in the namespace<a class="headerlink" href="#exactly-one-wallet-object-has-to-exist-in-the-namespace" title="Permalink to this headline">¶</a></h3>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
wallet = Wallet()   
account_master_create(&quot;account_master&quot;)
eosf.set_throw_error(False)
&quot;&quot;&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="case">
<span id="case"></span><h2>Case<a class="headerlink" href="#case" title="Permalink to this headline">¶</a></h2>
<p>None ‘Contract’ object can exist without an account object that keeps this
contract. The account object is presented at <a href="account.html">cases/account</a>.</p>
<p>Create an account objects: ‘account_eosio_token’. Provide it with a contract
of the class ‘eosio.token’. The code for the ‘eosio.token’ class comes with
the EOSIO repository, and it is copied, slightly modified to the Factory’s.
We use the later copy.</p>
<p>Make three other account objects, and execute actions of the contract on them.</p>
<div class="section" id="accounts">
<span id="accounts"></span><h3>Accounts<a class="headerlink" href="#accounts" title="Permalink to this headline">¶</a></h3>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
account_create(&quot;account_eosio_token&quot;, account_master)
account_create(&quot;account_alice&quot;, account_master)
account_create(&quot;account_bob&quot;, account_master)
account_create(&quot;account_carol&quot;, account_master)
&quot;&quot;&quot;
</pre></div>
</div>
</div>
<div class="section" id="create-a-contract-object">
<span id="create-a-contract-object"></span><h3>Create a Contract object<a class="headerlink" href="#create-a-contract-object" title="Permalink to this headline">¶</a></h3>
<p>Create an instance of the ‘Contract’ class, appending it to the account
‘account_eosio_token’:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
contract_eosio_token = Contract(account_eosio_token, &quot;token&quot;)
&quot;&quot;&quot;
</pre></div>
</div>
<p>The second argument of the creator of the ‘Contract’ class identifies the
code source. The Factory tries to be smart, and searches the repository of the
Factory. If it fails, put the right path there,
‘/mnt/c/Workspaces/EOS/eosfactory/contracts/eosio.token/’,
for example.</p>
<p>Note that the ‘Contract’ creator takes several default arguments that
sometimes have to be adjusted.</p>
</div>
<div class="section" id="methods-of-a-contract-objects">
<span id="methods-of-a-contract-objects"></span><h3>Methods of a contract objects<a class="headerlink" href="#methods-of-a-contract-objects" title="Permalink to this headline">¶</a></h3>
<p>Any ‘Contract’ object can:</p>
<ul class="simple">
<li>Build itself.<ul>
<li>Build abi alone.</li>
<li>Build wast alone.</li>
</ul>
</li>
<li>Deploy itself.</li>
<li>Push an action.</li>
<li>Show an action pushing it without broadcasting.</li>
<li>Show entry (a table) in the blockchain database of its account.</li>
</ul>
</div>
<div class="section" id="deploy-and-build-the-contract">
<span id="deploy-and-build-the-contract"></span><h3>Deploy and build the contract<a class="headerlink" href="#deploy-and-build-the-contract" title="Permalink to this headline">¶</a></h3>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
contract_eosio_token.build()
contract_eosio_token.deploy()
&quot;&quot;&quot;
</pre></div>
</div>
</div>
<div class="section" id="try-the-contract">
<span id="try-the-contract"></span><h3>Try the contract<a class="headerlink" href="#try-the-contract" title="Permalink to this headline">¶</a></h3>
<p>Execute actions of the contract:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
contract_eosio_token.push_action(
    &quot;create&quot;, 
    &#39;{&quot;issuer&quot;:&quot;&#39; 
        + str(account_master) 
        + &#39;&quot;, &quot;maximum_supply&quot;:&quot;1000000000.0000 EOS&quot;, \
        &quot;can_freeze&quot;:0, &quot;can_recall&quot;:0, &quot;can_whitelist&quot;:0}&#39;,
        [account_master, account_eosio_token])
    

contract_eosio_token.push_action(
    &quot;issue&quot;,
    &#39;{&quot;to&quot;:&quot;&#39; + str(account_alice)
        + &#39;&quot;, &quot;quantity&quot;:&quot;100.0000 EOS&quot;, &#39;
        + &#39;&quot;memo&quot;:&quot;issue 100.0000 EOS from eosio to alice&quot;}&#39;,
    account_master)

contract_eosio_token.push_action(
    &quot;transfer&quot;,
    &#39;{&quot;from&quot;:&quot;&#39; + str(account_alice)
        + &#39;&quot;, &quot;to&quot;:&quot;&#39; + str(account_carol)
        + &#39;&quot;, &quot;quantity&quot;:&quot;25.0000 EOS&quot;, &#39;
        + &#39;&quot;memo&quot;:&quot;transfer 25.0000 EOS from alice to carol&quot;}&#39;,
    account_alice)

contract_eosio_token.push_action(
    &quot;transfer&quot;,
    &#39;{&quot;from&quot;:&quot;&#39; + str(account_carol)
        + &#39;&quot;, &quot;to&quot;:&quot;&#39; + str(account_bob)
        + &#39;&quot;, &quot;quantity&quot;:&quot;11.0000 EOS&quot;, &#39;
        + &#39;&quot;memo&quot;:&quot;transfer 11.0000 EOS from carol to bob&quot;}&#39;,
    account_carol)

contract_eosio_token.push_action(
    &quot;transfer&quot;,
    &#39;{&quot;from&quot;:&quot;&#39; + str(account_carol)
        + &#39;&quot;, &quot;to&quot;:&quot;&#39; + str(account_bob)
        + &#39;&quot;, &quot;quantity&quot;:&quot;2.0000 EOS&quot;, &#39;
        + &#39;&quot;memo&quot;:&quot;transfer 2.0000 EOS from carol to bob&quot;}&#39;,
    account_carol)

contract_eosio_token.push_action(
    &quot;transfer&quot;,
    &#39;{&quot;from&quot;:&quot;&#39; + str(account_bob)
        + &#39;&quot;, &quot;to&quot;:&quot;&#39; + str(account_alice)
        + &#39;&quot;, &quot;quantity&quot;:&quot;2.0000 EOS&quot;, &#39;
        + &#39;&quot;memo&quot;:&quot;transfer 2.0000 EOS from bob to alice&quot;}&#39;,
    account_bob)                
&quot;&quot;&quot;
</pre></div>
</div>
<p>Inspect the database of the blockchain:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre>&quot;&quot;&quot;
table_alice = account_eosio_token.table(&quot;accounts&quot;, account_alice)
table_bob = account_eosio_token.table(&quot;accounts&quot;, account_bob)
table_carol = account_eosio_token.table(&quot;accounts&quot;, account_carol)
&quot;&quot;&quot;
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>You can see the result of a logging facility, printed in yellow, starting with 
&#39;INFO&#39;.
</pre></div>
</div>
</div>
<div class="section" id="test-run">
<span id="test-run"></span><h3>Test run<a class="headerlink" href="#test-run" title="Permalink to this headline">¶</a></h3>
<p>With a linux bash, change directory to where this file exists, that is the
directory ‘docs/source/cases’ in the repository, and enter the following
command:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre>$ python3 contract.md
</pre></div>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre>We hope that you get something similar to this one shown in the image below.
</pre></div>
</div>
<p><img src="contract.png" 
onerror="this.src='../../../source/cases/contract.png'" width="720px"/>
“”“</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Contract object</a><ul>
<li><a class="reference internal" href="#set-up">Set-up</a><ul>
<li><a class="reference internal" href="#exactly-one-wallet-object-has-to-exist-in-the-namespace">Exactly one ‘Wallet’ object has to exist in the namespace</a></li>
</ul>
</li>
<li><a class="reference internal" href="#case">Case</a><ul>
<li><a class="reference internal" href="#accounts">Accounts</a></li>
<li><a class="reference internal" href="#create-a-contract-object">Create a Contract object</a></li>
<li><a class="reference internal" href="#methods-of-a-contract-objects">Methods of a contract objects</a></li>
<li><a class="reference internal" href="#deploy-and-build-the-contract">Deploy and build the contract</a></li>
<li><a class="reference internal" href="#try-the-contract">Try the contract</a></li>
<li><a class="reference internal" href="#test-run">Test run</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="account_master.html"
                        title="previous chapter">Account master object</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="wallet.html"
                        title="next chapter">Wallet object</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/cases/contract.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="wallet.html" title="Wallet object"
             >next</a> |</li>
        <li class="right" >
          <a href="account_master.html" title="Account master object"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">EOSFactory 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Tokenika.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>