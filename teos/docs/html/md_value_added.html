<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>teos library: What&#39;s the value added of EOSFactory?</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">teos library
   &#160;<span id="projectnumber">0.8</span>
   </div>
   <div id="projectbrief">EOSIO smart contract IDE library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">What's the value added of EOSFactory? </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Dealing with the <code>Hello World</code> smart-contract</h2>
<p>The <code>Hello World</code> smart-contract is very simple. It's explained in <a href="https://github.com/EOSIO/eos/wiki/Tutorial-Hello-World-Contract"><em>Tutorial Hello World Contract</em></a>.</p>
<p>Let us go through the tutorial:</p>
<ul>
<li>Create a new folder called <code>hello</code>, switch to this folder, then create a file <code>hello.cpp</code> with the following content:</li>
</ul>
<div class="fragment"><div class="line">#include &lt;eosiolib/eosio.hpp&gt;</div><div class="line">#include &lt;eosiolib/print.hpp&gt;</div><div class="line">using namespace eosio;</div><div class="line"></div><div class="line">class hello : public eosio::contract {</div><div class="line">  public:</div><div class="line">      using contract::contract;</div><div class="line"></div><div class="line">      /// @abi action </div><div class="line">      void hi( account_name user ) {</div><div class="line">         print( &quot;Hello, &quot;, name{user} );</div><div class="line">      }</div><div class="line">};</div><div class="line"></div><div class="line">EOSIO_ABI( hello, (hi) )</div></div><!-- fragment --><ul>
<li>Compile the code to the Web Assembly <code>wast</code> format:</li>
</ul>
<div class="fragment"><div class="line">$ eosiocpp -o hello.wast hello.cpp</div><div class="line">Build hello.wast</div></div><!-- fragment --><ul>
<li>Now, generate an <code>ABI</code> file:</li>
</ul>
<div class="fragment"><div class="line">$ eosiocpp -g hello.abi hello.cpp</div><div class="line">Generated hello.abi</div></div><!-- fragment --><ul>
<li>Create an account and upload the contract:</li>
</ul>
<div class="fragment"><div class="line">$ cleos push action hello.code hi &#39;[&quot;user&quot;]&#39; -p user</div><div class="line">executed transaction: 4c10c1426c16b1656e802f3302677594731b380b18a44851d38e8b5275072857  244 bytes  1000 cycles</div><div class="line">#    hello.code &lt;= hello.code::hi               {&quot;user&quot;:&quot;user&quot;}</div><div class="line">&gt;&gt; Hello, user</div></div><!-- fragment --><ul>
<li>Open the <code>hello.cpp</code> file in your favorite editor and modify the <code>hi()</code> function in <code>hello.cpp</code> as follows:</li>
</ul>
<div class="fragment"><div class="line">void hi( account_name user ) {</div><div class="line">   require_auth( user );</div><div class="line">   print( &quot;Hello, &quot;, name{user} );</div><div class="line">}</div></div><!-- fragment --><ul>
<li>Recompile your code to the Web Assembly <code>wast</code> format:</li>
</ul>
<div class="fragment"><div class="line">$ eosiocpp -o hello.wast hello.cpp</div><div class="line">Build hello.wast</div></div><!-- fragment --><ul>
<li>Regenerate the <code>ABI</code> file:</li>
</ul>
<div class="fragment"><div class="line">$ eosiocpp -g hello.abi hello.cpp</div><div class="line">Generated hello.abi</div></div><!-- fragment --><ul>
<li>Create an account and upload the contract:</li>
</ul>
<div class="fragment"><div class="line">$ cleos create account eosio hello.code EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 </div><div class="line">EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4</div><div class="line">...</div><div class="line">$ cleos set contract hello.code ../hello -p hello.code</div><div class="line">...</div></div><!-- fragment --><ul>
<li>Finally, you can run the contract:</li>
</ul>
<div class="fragment"><div class="line">$ cleos push action hello.code hi &#39;[&quot;user&quot;]&#39; -p user</div><div class="line">executed transaction: 4c10c1426c16b1656e802f3302677594731b380b18a44851d38e8b5275072857  244 bytes  1000 cycles</div><div class="line">#    hello.code &lt;= hello.code::hi               {&quot;user&quot;:&quot;user&quot;}</div><div class="line">&gt;&gt; Hello, user</div></div><!-- fragment --><p>And so on. It is simple stuff, but you need to be very careful to issue the right commands, and not to confuse any of the cryptographic keys.</p>
<h2>Integrated Development Environment (IDE)</h2>
<p>What we are delaing with right now are simple demos. However, development of real-life smart-contracts is likely to be complex: most probably it's going to be a long sequence of trial-and-error events involving the source code being tested against a local <em>EOSIO</em> node.</p>
<p>That's why using a robust IDE seems to be crucial here. The main purpose of on an IDE is to automate everything that does not require creative thinking. Ideally, all what should be left to the coder is the buisness logic of the smart-contract.</p>
<h2>EOSFactory aims be a comprehensive IDE for EOS smart-contracts</h2>
<p>EOSFactory is under development itself, but already we can see its potential in action, provided you have both EOSFactory and <em>Visual Studio Code</em> (VSC) installed on your machine.</p>
<ul>
<li>Create a new smart-contract project named <code>hello.tokenika</code>:</li>
</ul>
<div class="fragment"><div class="line">$ $eosf bootstrap contract hello.tokenika skeleton --vsc</div><div class="line">#     template contract: /mnt/c/Workspaces/EOS/contracts/hello.tokenika</div></div><!-- fragment --><p>As a result, a new <em>Visual Studio Code</em> project is created and launched. You'll notice its standardized structure and clear division betweem source files, builds and unit tests.</p>
<ul>
<li>To play with it, open the <code>hello.tokenika.cpp</code> file and try the <em>InteliSense</em> feature to see the definition of the <code>print</code> function:</li>
</ul>
<div class="image">
<img src="VScode/intelisense1.png" alt="intelisense"/>
</div>
<ul>
<li>Obviousely you'll be dealing with lots of errors in any code. Some can be spotted automatically with a compiler. Try <code>Tasks -&gt; Run Task -&gt; Compile</code> to invoke the <code>CLANG</code> compiler. This is the output you should get:</li>
</ul>
<div class="image">
<img src="VScode/compile1.png" alt="compile"/>
</div>
<ul>
<li>Now, Let's build the contract with the <code>WASM</code> compliler. For that use <code>Tasks -&gt; Run Task -&gt; Build</code>. The result of the build process should look like this:</li>
</ul>
<div class="image">
<img src="VScode/build1.png" alt="build"/>
</div>
<ul>
<li><p class="startli">Any contract has to be tested. Use <code>Tasks -&gt; Run Task -&gt; Unittest</code>. A lot happened during the test process:</p><ul>
<li>A local <em>EOSIO</em> testnet has been started.</li>
<li>Local wallet has been created.</li>
<li><em>EOSIO</em> <code>eosio.bios</code> contract has been deployed.</li>
<li>Cryptographic keys have been created.</li>
<li>An account owning the contract has been created.</li>
<li>The contract has been deployed and then executed as part of the unit test.</li>
<li>The local testnet has been stopped and torn down.</li>
</ul>
<p class="startli">This is the output you should get:</p>
</li>
</ul>
<div class="image">
<img src="VScode/unittest1.png" alt="unittest"/>
</div>
<ul>
<li><p class="startli">EOSFactory can more now, and it is going to be able more and more in the near future. Now:</p>
<p class="startli">All the shown task functionality can be achieved with CMake procedures:</p><ul>
<li>build:<br />
 $ cd build; cmake ..; make</li>
<li>compile:<br />
 $ cd build; cmake -DC ..; make</li>
<li>unittest:<br />
 $ cd build; ctest -V -R ^unittest$</li>
<li>test:<br />
 $ cd build; ctest -V -R ^test$</li>
</ul>
</li>
<li>EOSFactory has two flavours:<ul>
<li><code>C/C++/Python</code> (using unit tests written in Python)</li>
<li>pure <code>C/C++</code> (no Python used, everything is in C/C++)</li>
</ul>
</li>
<li>As EOSFactory grows, it will include further libraries that could facilitate the process of smart-contract development.<br />
 Here we present one of such features in action: the logging tool. It's quite important, as the only way to debug a smart contract is actually by using loggers.<br />
 You'll notice the <code>logger.hpp</code> header file in the <code>src</code> directory. And in the <code>hello.tokenika.cpp</code> file you'll notice this line:<br />
 <code>&#160;&#160;&#160;&#160;logger_info("user: ", name{user});</code><br />
 The effect of the above code entry is the following output in test results:<br />
 <code>&#160;&#160;&#160;&#160;INFO user: carol @ 8:53:50 hello.tokenika.cpp[16](hi)</code><br />
 What that means is that the logger offers you not only the value of a variable, but also the exact line number and the file name where this logger event occured. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
